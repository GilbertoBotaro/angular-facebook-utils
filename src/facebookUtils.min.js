!function(a,b){"use strict";b["true"]=a,angular.module("facebookUtils",[]).value("facebookAppID","").value("facebookPermissions","").value("facebookChannelFile","bower_components/angular-facebook-utils/channel.html").value("facebookRoutingEnabled",!1).value("facebookRoutingEnabled",!1).value("facebookLoginPath","/").run(["facebookRoutingEnabled","facebookLoginPath","$rootScope","$location","facebookSDK",function(a,b,c,d,e){a&&c.$on("$routeChangeStart",function(a,c){c.needAuth&&!e.loggedIn&&d.path(b)})}]),angular.module("angular-facebook-utils").run(["$templateCache",function(a){a.put("src/views/facebookLoginPartial.html",'<div id=facebookLogin><style>.marginTop {margin-top: 10px;}\n    .btn-auth,.btn-auth:visited{position:relative;display:inline-block;height:22px;padding:0 1em;border:1px solid #999;border-radius:2px;margin:0;text-align:center;text-decoration:none;font-size:14px;line-height:22px;white-space:nowrap;cursor:pointer;color:#222;background:#fff;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-appearance:none;*overflow:visible;*display:inline;*zoom:1}.btn-auth:hover,.btn-auth:focus,.btn-auth:active{color:#222;text-decoration:none}.btn-auth:before{content:"";float:left;width:22px;height:22px;background:url(http://necolas.github.io/css3-social-signin-buttons/auth-icons.png) no-repeat 99px 99px}.btn-auth.large{height:36px;line-height:36px;font-size:20px}.btn-auth.large:before{width:36px;height:36px}.btn-auth::-moz-focus-inner{border:0;padding:0}.btn-facebook,.btn-facebook:visited{border-color:#29447e;border-bottom-color:#1a356e;color:#fff;background-color:#5872a7;background-image:-webkit-gradient(linear,0 0,0 100%,from(#637bad),to(#5872a7));background-image:-webkit-linear-gradient(#637bad,#5872a7);background-image:-moz-linear-gradient(#637bad,#5872a7);background-image:-ms-linear-gradient(#637bad,#5872a7);background-image:-o-linear-gradient(#637bad,#5872a7);background-image:linear-gradient(#637bad,#5872a7);-webkit-box-shadow:inset 0 1px 0 #879ac0;box-shadow:inset 0 1px 0 #879ac0}.btn-facebook:hover,.btn-facebook:focus{color:#fff;background-color:#3b5998}.btn-facebook:active{color:#fff;background:#4f6aa3;-webkit-box-shadow:inset 0 1px 0 #45619d;box-shadow:inset 0 1px 0 #45619d}.btn-facebook:before{border-right:1px solid #465f94;margin:0 1em 0 -1em;background-position:0 0}.btn-facebook.large:before{background-position:0 -22px}</style><a ng-click=signInOrConfigure() data-toggle=modal data-target=#myModal class="btn-auth btn-facebook"><span ng-hide=connected>Sign in with <b>Facebook</b></span> <span ng-show=connected>Sign out</span></a><div id=fb-root></div></div>')}]),angular.module("facebookUtils").service("facebookSDK",["$window","$rootScope","$q","facebookPermissions","facebookChannelFile","facebookAppID",function(a,b,c,d,e,f){var g=function(){};return g.permissions=d,g.channelFile=e,g.initialized=!1,g.loggedIn=!1,g.prototype.wasInitialized=function(){return this.initialized},g.prototype.setPermissions=function(a){a&&(this.permissions=a)},g.prototype.setChannelFile=function(a){a&&(this.channelFile=a)},g.prototype.api=function(){var a=c.defer(),d=[].splice.call(arguments,0);return d.push(function(c){b.$apply(function(){a.resolve(c)})}),FB.api.apply(FB,d),a.promise},g.prototype.login=function(){var a=this;FB.getLoginStatus(function(c){"connected"===c.status?(b.$broadcast("fbLoginSuccess",c),a.loggedIn=!0):FB.login(function(c){c.authResponse?(c.userNotAuthorized=!0,b.$broadcast("fbLoginSuccess",c),a.loggedIn=!1):b.$broadcast("fbLoginFailure")},{scope:a.permissions})},!0)},g.prototype.logout=function(){FB.logout(function(a){a?(b.$broadcast("fbLogoutSuccess"),_self.loggedIn=!1):b.$broadcast("fbLogoutFailure")})},g.prototype.initializeFb=function(c,d){var e=this;if(e.initialized=!0,!c&&!f)throw new Error("You must provide an app-id for the facebook-login directive to work!");a.fbAsyncInit=function(){FB.init({appId:c||f,channelUrl:e.channelFile,status:!0,cookie:!0}),d&&e.login(),FB.Event.subscribe("auth.authResponseChange",function(a){b.$broadcast("fbStatusChange",a)})},function(a){var b,c="facebook-jssdk",d=a.getElementsByTagName("script")[0];a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="//connect.facebook.net/en_US/all.js",d.parentNode.insertBefore(b,d))}(document)},new g}]),angular.module("facebookUtils").directive("facebookLogin",["facebookSDK",function(a){return{templateUrl:"src/views/facebookLoginPartial.html",restrict:"E",replace:!0,scope:{},link:function(b,c,d){d.permissions&&a.setPermissions(d.permissions),d.channelFile&&a.setChannelFile(d.channelFile),b.signInOrConfigure=function(){b.connected?a.logout():a.login()},b.$on("fbLoginSuccess",function(){b.connected=!0}),b.$on("fbLogoutSuccess",function(){b.$apply(function(){b.connected=!1})}),a.initializeFb(d.appId)}}}])}({},function(){return this}());